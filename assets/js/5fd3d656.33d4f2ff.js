"use strict";(self.webpackChunkdev_note=self.webpackChunkdev_note||[]).push([[8690],{3877:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>a,frontMatter:()=>l,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"streamo/route-guard","title":"\ub77c\uc6b0\ud305 \uac00\ub4dc","description":"\ud83d\udd10 \uc778\uc99d \uae30\ubc18 \ud398\uc774\uc9c0 \uc811\uadfc \uc81c\uc5b4","source":"@site/project/streamo/route-guard.md","sourceDirName":"streamo","slug":"/streamo/route-guard","permalink":"/dev-note/project/streamo/route-guard","draft":false,"unlisted":false,"editUrl":"https://github.com/pukkok/dev-note/edit/main/project/streamo/route-guard.md","tags":[],"version":"current","frontMatter":{"title":"\ub77c\uc6b0\ud305 \uac00\ub4dc"},"sidebar":"sidebar","previous":{"title":"Streamo \uc18c\uac1c","permalink":"/dev-note/project/streamo/intro"},"next":{"title":"API \uac1c\ubc1c \ud658\uacbd \uad6c\uc131","permalink":"/dev-note/project/streamo/api-setup"}}');var s=r(4848),i=r(8453);const l={title:"\ub77c\uc6b0\ud305 \uac00\ub4dc"},t=void 0,c={},o=[{value:"\ud83d\udd10 \uc778\uc99d \uae30\ubc18 \ud398\uc774\uc9c0 \uc811\uadfc \uc81c\uc5b4",id:"-\uc778\uc99d-\uae30\ubc18-\ud398\uc774\uc9c0-\uc811\uadfc-\uc81c\uc5b4",level:2},{value:"\u2705 \uad6c\ud604 \ubaa9\uc801",id:"-\uad6c\ud604-\ubaa9\uc801",level:3},{value:"RootGuard: \ucd5c\uc0c1\uc704 \ub77c\uc6b0\ud305 \ubcf4\ud638",id:"rootguard-\ucd5c\uc0c1\uc704-\ub77c\uc6b0\ud305-\ubcf4\ud638",level:3},{value:"\uc8fc\uc694 \uae30\ub2a5",id:"\uc8fc\uc694-\uae30\ub2a5",level:4},{value:"AdminLayout: \uad00\ub9ac\uc790 \uad8c\ud55c \uc804\uc6a9 \ub77c\uc6b0\ud305 \ubcf4\ud638",id:"adminlayout-\uad00\ub9ac\uc790-\uad8c\ud55c-\uc804\uc6a9-\ub77c\uc6b0\ud305-\ubcf4\ud638",level:3},{value:"\uc8fc\uc694 \uae30\ub2a5",id:"\uc8fc\uc694-\uae30\ub2a5-1",level:4},{value:"\ucd94\uac00 UX \ucc98\ub9ac",id:"\ucd94\uac00-ux-\ucc98\ub9ac",level:4},{value:"\ud83d\udea7 \uc778\uc99d \uc0c1\ud0dc \uc720\uc9c0 \ubc29\ubc95",id:"-\uc778\uc99d-\uc0c1\ud0dc-\uc720\uc9c0-\ubc29\ubc95",level:3},{value:"\ud83d\udd12 \ubcf4\ud638 \ub300\uc0c1 \uacbd\ub85c \uc608\uc2dc",id:"-\ubcf4\ud638-\ub300\uc0c1-\uacbd\ub85c-\uc608\uc2dc",level:3}];function h(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"-\uc778\uc99d-\uae30\ubc18-\ud398\uc774\uc9c0-\uc811\uadfc-\uc81c\uc5b4",children:"\ud83d\udd10 \uc778\uc99d \uae30\ubc18 \ud398\uc774\uc9c0 \uc811\uadfc \uc81c\uc5b4"}),"\n",(0,s.jsxs)(n.p,{children:["Streamo\ub294 \ud68c\uc6d0\uc81c\ub85c \uc6b4\uc601\ub418\uba70, ",(0,s.jsx)("br",{}),"\n\ub85c\uadf8\uc778\ud558\uc9c0 \uc54a\uc740 \uc0ac\uc6a9\uc790\uac00 \ud2b9\uc815 \uc8fc\uc18c\uc5d0 \uc9c1\uc811 \uc811\uadfc\ud558\ub294 \uac83\uc744 \ubc29\uc9c0\ud558\uae30 \uc704\ud574\n",(0,s.jsx)("span",{style:{color:"#e67e22"},children:(0,s.jsx)("strong",{children:"\ub77c\uc6b0\ud305 \uac00\ub4dc(Routing guard)"})}),"\ub97c \uad6c\ud604\ud558\uc600\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.h3,{id:"-\uad6c\ud604-\ubaa9\uc801",children:"\u2705 \uad6c\ud604 \ubaa9\uc801"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\ube44\uc778\uac00 \uc0ac\uc6a9\uc790\uc758 ",(0,s.jsx)(n.code,{children:"/admin"})," \ub4f1 \uad00\ub9ac\uc790 \ud398\uc774\uc9c0 \uc811\uadfc \ucc28\ub2e8"]}),"\n",(0,s.jsx)(n.li,{children:"\ud1a0\ud070\uc774 \ub9cc\ub8cc\ub418\uc5c8\uac70\ub098 \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \uc790\ub3d9 \ub9ac\ub514\ub809\uc158 \ucc98\ub9ac"}),"\n",(0,s.jsx)(n.li,{children:"\ub85c\uadf8\uc778 \uc0c1\ud0dc\uc5d0 \ub530\ub77c \ud398\uc774\uc9c0 \ub178\ucd9c \uc5ec\ubd80 \uacb0\uc815"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"rootguard-\ucd5c\uc0c1\uc704-\ub77c\uc6b0\ud305-\ubcf4\ud638",children:"RootGuard: \ucd5c\uc0c1\uc704 \ub77c\uc6b0\ud305 \ubcf4\ud638"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"RootGuard"}),"\ub294 \ud074\ub77c\uc774\uc5b8\ud2b8 \uc571 \uc804\uccb4\uc5d0\uc11c \uc0ac\uc6a9\uc790 \uc778\uc99d \uc0c1\ud0dc\ub97c \uae30\uc900\uc73c\ub85c \ucd08\uae30 \ub77c\uc6b0\ud305\uc744 \uc81c\uc5b4\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.h4,{id:"\uc8fc\uc694-\uae30\ub2a5",children:"\uc8fc\uc694 \uae30\ub2a5"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"localStorage"}),"\uc5d0\uc11c ",(0,s.jsx)(n.code,{children:"accessToken"})," \ubc0f \uc0ac\uc6a9\uc790 \uc815\ubcf4 \ubcf5\uc6d0"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud1a0\ud070 \ub9cc\ub8cc \uc5ec\ubd80 \ud310\ub2e8 (JWT ",(0,s.jsx)(n.code,{children:"exp"})," \uae30\ubc18)"]}),"\n",(0,s.jsx)(n.li,{children:"\ub85c\uadf8\uc778 \uc5ec\ubd80\uc5d0 \ub530\ub77c \uba54\uc778 \ud398\uc774\uc9c0 \ub610\ub294 \ub8e8\ud2b8\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"if (!isAuthenticated && !isLoginPage) {\n  return router.replace('/')\n}\n\nif (isAuthenticated && isLoginPage) {\n  router.replace('/main')\n}\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\uc0c1\ud0dc \ubcf5\uc6d0\uc774 \ub05d\ub0a0 \ub54c\uae4c\uc9c0\ub294 \ud654\uba74\uc744 \ub80c\ub354\ub9c1\ud558\uc9c0 \uc54a\uc544 \uae5c\ube61\uc784\uc774 \uc5c6\uc74c (",(0,s.jsx)(n.code,{children:"return null"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"adminlayout-\uad00\ub9ac\uc790-\uad8c\ud55c-\uc804\uc6a9-\ub77c\uc6b0\ud305-\ubcf4\ud638",children:"AdminLayout: \uad00\ub9ac\uc790 \uad8c\ud55c \uc804\uc6a9 \ub77c\uc6b0\ud305 \ubcf4\ud638"}),"\n",(0,s.jsxs)(n.p,{children:["\uad00\ub9ac\uc790 \uc804\uc6a9 \ub808\uc774\uc544\uc6c3\uc5d0\uc11c\ub294 ",(0,s.jsx)(n.code,{children:"userInfo.role"})," \uac12\uc744 \uae30\ubc18\uc73c\ub85c \uc811\uadfc \uad8c\ud55c\uc744 \ucd94\uac00\uc801\uc73c\ub85c \ud655\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.h4,{id:"\uc8fc\uc694-\uae30\ub2a5-1",children:"\uc8fc\uc694 \uae30\ub2a5"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"userInfo"}),"\uac00 \uc5c6\uc73c\uba74 ",(0,s.jsx)(n.code,{children:"/"}),"\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"role !== 'ADMIN'"}),"\uc774\uba74 ",(0,s.jsx)(n.code,{children:"/main"}),"\uc73c\ub85c \uc6b0\ud68c"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/admin"})," \ub8e8\ud2b8\uc5d0 \uc9c1\uc811 \uc811\uadfc \uc2dc ",(0,s.jsx)(n.code,{children:"/admin/users"}),"\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"if (!userInfo) return router.replace('/')\nif (userInfo.role !== 'ADMIN') return router.replace('/main')\nif (pathname === '/admin') {\n  router.replace('/admin/users')\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\ucd94\uac00-ux-\ucc98\ub9ac",children:"\ucd94\uac00 UX \ucc98\ub9ac"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\ubaa8\ubc14\uc77c \uc0ac\uc774\ub4dc\ubc14 \uc5f4\ub9bc \uc0c1\ud0dc\uc5d0\uc11c \uc2a4\ud06c\ub864 \ubc29\uc9c0 (",(0,s.jsx)(n.code,{children:"overflow: hidden"})," \ucc98\ub9ac)"]}),"\n",(0,s.jsx)(n.li,{children:"\ub77c\uc6b0\ud2b8\uc5d0 \ub530\ub77c \ud604\uc7ac \ud0ed \ub77c\ubca8\uc744 Sidebar\uc640 \uc0c1\ub2e8 Header\uc5d0 \ub3d9\uae30\ud654"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"-\uc778\uc99d-\uc0c1\ud0dc-\uc720\uc9c0-\ubc29\ubc95",children:"\ud83d\udea7 \uc778\uc99d \uc0c1\ud0dc \uc720\uc9c0 \ubc29\ubc95"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\ub85c\uadf8\uc778 \uc131\uacf5 \uc2dc accessToken\uc744 ",(0,s.jsx)(n.code,{children:"localStorage"}),"\uc5d0 \uc800\uc7a5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"RootGuard"}),"\uac00 \ub9c8\uc6b4\ud2b8\ub418\uba70 \ud1a0\ud070 \ud30c\uc2f1 \ubc0f \uc720\ud6a8\uc131 \uac80\uc0ac"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud1a0\ud070\uc774 \uc720\ud6a8\ud558\uba74 ",(0,s.jsx)(n.code,{children:"usePublicUserStore.hydrateUserInfo()"}),"\ub85c \uc0ac\uc6a9\uc790 \uc815\ubcf4 \ubcf5\uc6d0"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"safeRequest"})," \uc0ac\uc6a9 \uc2dc 401 \uc751\ub2f5\uc774 \uc624\uba74 \uc790\ub3d9 \ub85c\uadf8\uc544\uc6c3 \ubc0f \uba54\uc778 \ub9ac\ub2e4\uc774\ub809\ud2b8 \ucc98\ub9ac"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"-\ubcf4\ud638-\ub300\uc0c1-\uacbd\ub85c-\uc608\uc2dc",children:"\ud83d\udd12 \ubcf4\ud638 \ub300\uc0c1 \uacbd\ub85c \uc608\uc2dc"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\ubcf4\ud638 \uacbd\ub85c"}),(0,s.jsx)(n.th,{children:"\uc124\uba85"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/admin/*"})}),(0,s.jsx)(n.td,{children:"\uad00\ub9ac\uc790 \uae30\ub2a5 \uc804\uccb4 (\uc720\uc800, \ube44\ub514\uc624, \uba54\ub274, \uacf5\uc9c0 \uad00\ub9ac \ub4f1)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/notice/edit"})}),(0,s.jsx)(n.td,{children:"\uacf5\uc9c0 \uc218\uc815 \ud398\uc774\uc9c0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/video/upload"})}),(0,s.jsx)(n.td,{children:"\ube44\ub514\uc624 \uc5c5\ub85c\ub4dc \uc804\uc6a9 \ub77c\uc6b0\ud2b8"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"\uc774\ub7ec\ud55c \uc811\uadfc \uc81c\uc5b4 \ub85c\uc9c1\uc744 \ud1b5\ud574 Streamo\ub294 \ub85c\uadf8\uc778 \uc0c1\ud0dc \uae30\ubc18\uc73c\ub85c \ub3d9\uc791\ud558\ub294 \ubcf4\uc548\uc131\uacfc \uc548\uc815\uc131\uc744 \ub3d9\uc2dc\uc5d0 \ud655\ubcf4\ud558\uc600\uc2b5\ub2c8\ub2e4."})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>t});var d=r(6540);const s={},i=d.createContext(s);function l(e){const n=d.useContext(i);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),d.createElement(i.Provider,{value:n},e.children)}}}]);